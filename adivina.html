<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Adivina número</title>
    <style>
        .contenedor{
            width: 35%;
            margin: auto;
            margin-top: 50px;
            text-align: center;
            background-color: rgb(211, 209, 209);
            padding: 20px;
        }
        h2{
            text-transform: uppercase;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }
    </style>
    <script>
        console.log("Estoy dentro");


        window.onload = generarNumeroAleatorioyVidas;

        let numero_aleatorio;//variable global
        const VIDAS = 10;
        let numero_intentos = 0;
        let acertado = false;
        let numero_vidas = VIDAS;

        

        function generarNumeroAleatorioyVidas() {
            //Invoco a la variable global dentro de esta función
            numero_aleatorio = Math.floor(Math.random() * (10 - 1)) + 1;
            console.log("Número aleatorio= " + numero_aleatorio);
            document.getElementById("dvVidas").innerHTML = VIDAS;
        }

        function informarAcierto() {
            alert("¡ENORABUENA, has acertado!");
        }

        //Aquí empieza la función que señala si hemos acertado o no
        function adivinarNumero() {
            console.log("Vamos a comprobar");

            

            //Obtener el número
            let numero_introducido = document.getElementById("inNumero").value;
            numero_intentos


            numero_intentos = numero_intentos + 1; //Número de intentos - numero_intentos++;
            console.log("Llevas " + numero_intentos + " intentos");
            numero_vidas = numero_vidas -1;
            //Intentos

            //Vamos a cambiar el div
            document.getElementById("dvVidas").innerHTML = "Te quedan " + (numero_vidas) + " vidas";

            if (numero_introducido == numero_aleatorio) {
                console.log("¡ENHORABUENA!");
                informarAcierto();
                acertado = true;
                alert("FINAL DEL JUEGO.Reinicia");
                //Recargo la página de forzosamente
                window.location.reload(true);
            } else if (numero_introducido < numero_aleatorio) {
                console.log("Es mayor");
                alert("¡PISTA, el número buscado es mayor!");
                document.getElementById("hIntentos").innerHTML= "TE QUEDAN " + numero_vidas + " INTENTOS";
                
            } else /*if (numero_introducido > numero_aleatorio)*/ {
                console.log("Es menor");
                alert("¡PISTA, el número buscado es menor!");
                document.getElementById("hIntentos").innerHTML= "TE QUEDAN " + numero_vidas + " INTENTOS";
            }
            //Si has alcanzado el límite de intentos y no has acertado
            //&&-Y lógico; ||-o
            
            if ((numero_intentos == VIDAS) && (!acertado)) {
                console.log("El juego ha finalizado");
                alert("FINAL DEL JUEGO.Reinicia");
                
                //Recargo la página de forzosamente
                window.location.reload(true);
            }
        }


    </script>
</head>

<body>
    <div class="contenedor">
        <h2>Adivina un número aleatorio <br> del 1 al 10</h1>
        <label for="">Adivina el número:</label>
        <input type="text" name="" id="inNumero"><br>
        <h4 id="hIntentos">TIENES 5 INTENTOS</h4>
        <input type="button" onclick="adivinarNumero(min, max)" value="COMPROBAR">
    </div>

    <div id="dvVidas">5</div>
</body>

</html>